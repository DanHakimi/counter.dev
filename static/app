<!doctype html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <meta name="description" content="Free analytics tool with all common features.">
      <title>Simple Web Analytics</title>
      <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqvmap/1.5.1/jqvmap.min.css">
      <script src="moment.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jqvmap/1.5.1/jquery.vmap.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jqvmap/1.5.1/maps/jquery.vmap.world.js"></script>
      <script data-goatcounter="https://simple-web-analytics.goatcounter.com/count"
         async src="//gc.zgo.at/count.js"></script>
      <script>
         // Simple Web Analytics tracking code
         if (!sessionStorage.getItem("_swa") && document.referrer.indexOf(location.protocol + "//" + location.host) !== 0) {
             fetch("https://simple-web-analytics.com/track?" + new URLSearchParams({
                 referrer: document.referrer,
                 site: "simple-web-analytics.com",
                 utcoffset: 2
             }));
         }
         sessionStorage.setItem("_swa", "1");
      </script>
      <script src="script.js"></script>
      <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700;800&display=swap" rel="stylesheet">

<script>
Chart.defaults.global.title.fontFamily = '-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"';
Chart.defaults.global.title.fontColor = "rgba(0,0,0, 0.7)";
Chart.defaults.global.title.fontSize = 16
Chart.defaults.global.title.lineHeight = 1.2
Chart.defaults.global.title.padding = 10
Chart.defaults.global.layout = {
            padding: {
                left: 5,
                right: 5,
                top: 10,
                bottom: 10
            }
}
</script>


      <style>


         h5, th {
           font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
           color: rgba(0,0,0, 0.7);
           font-size: 16px;
           line-height: 1.2;
           padding-top: 7px;
           padding-bottom: 8px;
           font-weight: bold;
           text-align: center;

         }

         body {
           background-color: rgba(0, 0, 0, 0.02);
           color: rgba(0, 0, 0, 0.8);
         }
         .flex-container {
           box-sizing: border-box;
         }

         .flex-item {
           padding: 0.75em 0.5em;
           box-sizing: border-box;
           display:flex;
         }

         .flex-item>div, .flex-item>canvas {
           border-radius: 5px;
           flex: 1 1 auto;
           box-shadow: 0 0.1em 1rem rgba(0, 0, 0, 0.1);
           background-color: white;
         }

         .list, .list td, .list tr {
         }

         table {
           line-height: 1.75;
         }
         
         table img {
           margin-right: 10px;
           margin-left: 5px;
         }

         table tr:nth-child(even) {
           background-color: #CCDAE9;
         }

      </style>
   </head>
   <body>
      <div id="page-index">
         <a href="" id="demo" onclick="demo(); return false">open demo</a>
         <form method="POST" action="">
            <div id="alert_register" style="display: none;"></div>
            <input id="reg_user" name="username" placeholder="Username" />
            <input id="reg_password" type="password" name="password" placeholder="Password" />
            <button type="submit" onclick="register(); return false" name="action">Register</button>
         </form>
         <form method="POST" action="">
            <div id="alert_login" style="display: none;"></div>
            <input id="login_user" name="username" placeholder="Username" />
            <input id="login_password" type="password" name="password" placeholder="Password" />
            <button type="submit" onclick="login(); return false" id="login_button" name="action">Login</button>
         </form>
      </div>
      <div id="page-graphs" class="hidden">

         <div class="flex-container mx-auto max-w-4xl flex flex-wrap">

           <div class="flex-item mb-5">
             <div style="box-shadow: none; background-color: transparent; padding: 0px;">
               
               <a href="" class="shadow-xs bg-yellow-300 hover:bg-yellow-400 text-gray-800 text-xs font-bold py-2 px-4 rounded inline-flex items-center mr-1">
                 Logout
               </a>

               <button onclick="downloadData()" class="shadow-xs bg-gray-300 hover:bg-gray-400 text-gray-800 text-xs font-bold py-2 px-4 rounded inline-flex items-center mr-1">
                 <span>&nbsp;</span>
                 <svg class="fill-current w-3 h-3 mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"/></svg>
                 <span>Download</span>
               </button>
               
               <button id="tracking-code-button" onclick="toggleTrackingCode()" class="shadow-xs bg-gray-300 hover:bg-gray-400 text-gray-800 text-xs font-bold py-2 px-4 rounded inline-flex items-center">
                 TRACKING CODE
               </button>
             </div>
           </div>
           <div class="flex-item mb-5 justify-center" style="flex-grow: 1">
             <h5><span class="text-gray-500">top origin:</span> <a id="domain" target="_blank">DOMAIN</a><h5>
           </div>


           <div id="tracking-code" class="flex-item w-full">
               <div class="overflow-scroll" style="background-color: #ebf7ff">
                  <h5>Tracking Code</h5>
                  <p class="m-5">
                  Copy and paste this code into the html of the pages you want to track.
                  </p>
                  <pre class="m-5 leading-normal text-xs"><code>&lt;script&gt;
// Simple Web Analytics tracking code
if (!sessionStorage.getItem("_swa") && document.referrer.indexOf(location.protocol + "//" + location.host) !== 0) {
    fetch("https://simple-web-analytics.com/track?" + new URLSearchParams({
        referrer: document.referrer,
        site: "<span>USERNAME</span>",
        utcoffset: <span id="utcoffset">0</span>
    }));
}
sessionStorage.setItem("_swa", "1");
&lt;/script&gt;</code></pre>
               </div>
           </div>


             <div class="flex-item w-2/3">
               <canvas id="last_days_chart" height=100></canvas>
             </div>

             <div class="flex-item w-1/3">
               <canvas id="ref_chart" height=200></canvas>
             </div>

            <div class="flex-item w-full mb-5">
               <div>
                  <canvas class="w-full" height="200" id="graph"></canvas>
               </div>
            </div>

            <div class="flex-item w-1/3">
               <canvas height=200 id="device"></canvas>
            </div>
            <div class="flex-item w-1/3">
               <canvas height=200 id="platform"></canvas>
            </div>
            <div class="flex-item w-1/3">
               <canvas height=200 id="browser"></canvas>
            </div>

            <div class="flex-item w-1/3">
               <canvas id="time" height=230></canvas>
            </div>
            <div class="flex-item w-1/3">
               <canvas id="hour" height=230></canvas>
            </div>
            <div class="flex-item w-1/3">
               <canvas id="weekday" height=230></canvas>
            </div>

            <div class="flex-item w-2/3 my-5" style="height: 450px">
               <div id="world"><h5>World map</h5></div>
            </div>

            <div class="flex-item w-1/3 my-5" style="height: 450px">
               <div style="overflow-y: auto">
                  <table id="world_list"></table>
               </div>
            </div>

            <div class="flex-item w-1/3" style="max-height: 450px">
                <div class="overflow-y-auto" id="list_ref"></div>
            </div>
             <div class="flex-item w-2/3" style="max-height: 450px">
                <div class="overflow-y-auto" id="list_loc"></div>
             </div>

             <div class="flex-item w-full" style="max-height: 200px">
                <div class="overflow-y-auto" id="list_origin"></div>
             </div>

      </div>



         <div class="flex-item w-full max-w-screen-xl mx-auto">
            <div class="overflow-y-auto">
               <h5>Log</h5>
               <table>
                  <thead>
                     <tr>
                        <th>Date</th>
                        <th>Time</th>
                        <th>IP</th>
                        <th>Referrer</th>
                        <th>User-Agent</th>
                     </tr>
                  </thead>
                  <tbody id="log_body">
                  </tbody>
               </table>
            </div>
         </div>
         </div>

      <script>
         if (location.hash === "#demo"){
             document.getElementById("demo").click()
         }
      </script>
   </body>
</html>
