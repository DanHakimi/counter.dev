<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="description" content="Measure how many people are using your webapp"> 
    <title>Webstats</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">


    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>

    <style>
.clean {
  color: #eb8034;
}
.btn-warning {
  font-weight: bold;
  background-color: #eb8034;
  border-color: black;
  color: white;
  text-shadow: -1px 0 #e86e17, 0 1px  #e86e17, 1px 0 #e86e17, 0 -1px #e86e17;
}

.btn-light, .btn-light:hover {
  border-color: black;
}


    </style>
</head>

<body>
<div id="page-index">
<div style="background-color: #eb8034; min-height: 100vh; padding-top: 5em;">

<img src="http://localhost:5000/track/1588964708.5805395" style="position: fixed; right: 0px; bottom: 0px"></img>
<br/>

<div class="container" style="max-width: 37em;">

    <div class="card border-dark">
    <div class="card-body">

    <div class="card-title"><h2><b class="clean">Simple</b> Web Analytics</h2></div>
    <h6 class="card-subtitle mb-2 text-muted">Instant Setup. No Cookies. Always Free.</h6>

    <div class="card-text">
    <p>
    The lowest possible barrier to get you started with web analytics.
    </p>

    <div id="alert" class="alert alert-warning" style="display: none;" role="alert">
    </div>

    <form method="POST" action="">
      <div class="form-group has-error">
        <input id="user" class="form-control" name="username" placeholder="Domain or username">
      </div>
      <div class="form-group">
        <input id="password" type="password" name="password" class="form-control" placeholder="Password">
      </div>

      <div class="btn-group mr-2" role="group" aria-label="First group">
        <button type="submit" onclick="post('dashboard'); return false" class="btn btn-light" name="action">Login</button>
        <a href="#" class="btn btn-light">Demo</a>
      <button type="submit" onclick="post('register'); return false" class="btn btn-dark" name="action" value="register">&nbsp;&nbsp;Register&nbsp;&nbsp;</button>
      </div>
    </form>

    </div>
    </div>
</div>

</div>
</div>

<div class="container" style="margin-bottom: 5em;">

<style>
p.short {
    max-width: 40em;

}
</style>

<h1 id="text-begin">Just Simple</h1>
<p class="short">
Clean Web Analytics is uncompromisingly simple and tries very hard to stand out of your way.
</p>

<h1>Realtime</h1>
<p class="short">
Your traffic is available at the moment it happens. See what is happening now, not yesterday.
</p>

<h1>See What Really Matters</h1>
<p class="short">
We only show our users what they actually understand. Clean Web Analytics was
carefully crafted to give you an uncluttered view. Everything is in one
printable page. No hidden menus.  
</p>

<h1>No Cookies</h1>
<p class="short">
We don't use cookies. We don't track with JavaScript. We don't do
Fingerprinting. We don't assign user indentifiers to traffic at all. Privacy is
baked in at the core technical design choices of Clean Web Analytics.
</p>

</div>


<script>

function post(name){
 user = document.getElementById("user").value
 password = document.getElementById("password").value

  fetch("/" + name, {
    method: "POST",
    body: "user=" + encodeURIComponent(user) + '&password=' + encodeURIComponent(password),
    headers: {
    'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'
   },
 }).then(resp => {
      if (resp.status == 200){
        return resp.json()
      } else if (resp.status == 400){
        return resp.text()
      } else {
        return "Bad server status code: " + resp.status
      }
  }
).then(data => {
    if (typeof(data) === "object"){
      showGraphs(data)
    } else {
      document.getElementById("alert").style.display = "block"
      document.getElementById("alert").innerHTML = data
    }
  })
}



function showGraphs(data){
  console.log(data)
  document.getElementById("page-index").style.display = "none"
  document.getElementById("page-graphs").style.display = "block"

  orange = "#eb8034"

  new Chart(document.getElementById("graph"), {
    type: 'line',
    data: {
      labels: ["2020-1-1", "2020-1-2", "2020-1-1", "2020-1-3", "2020-1-4"],
      datasets: [
        {
          data: [40, 50, 46, 60, 50],
          label: 'xxxxx',
          backgroundColor: '#268bd2',
          pointBackgroundColor: "rgba(0,0,0,0)",
        },
      ],
    },
    options: {
      scales: {
          yAxes: [{
              ticks: {
                  beginAtZero: true
              }
          }]
      },
      legend: {display: false},
    },
  })



  new Chart(document.getElementById("direct"), {
    type: 'pie',
    data: {
      labels: [
        'A',
        'B',
      ],
      datasets: [
        {
          backgroundColor: [
            orange,
            'white',
          ],
          borderColor: orange,
          data: [
            40,
            60,
          ],
        },
      ],
    },
    options: {
      legend: {display: false},
    },
  })

  new Chart(document.getElementById("mobile"), {
    type: 'pie',
    data: {
      labels: [
        'A',
        'B',
      ],
      datasets: [
        {
          backgroundColor: [
            orange,
            'white',
          ],
          borderColor: orange,
          data: [
            20,
            80,
          ],
        },
      ],
    },
    options: {
      legend: {display: false},
    },
  })

  new Chart(document.getElementById("time"), {
    type: 'horizontalBar',
    data: {
      labels: [
        'Morning',
        'Noon',
        'Evening',
        'Night',
      ],
      datasets: [
        {
          backgroundColor: [
            orange,
            orange,
            orange,
            orange,
          ],
          data: [
            80,
            20,
            20,
            30,
          ],
        },
      ],
    },
    options: {
      tooltips: {
          mode: 'index'
      },
      legend: {display: false},
      scales: {
        xAxes: [
          {
            gridLines: {
              display: false,
            },
            ticks: {display: false, beginAtZero: true}
          },
        ],
        yAxes: [
          {
            gridLines: {
              display: false,
            },
            ticks: {beginAtZero: true}
          },
        ],
      },
    },
  })


  new Chart(document.getElementById("weekday"), {
    type: 'horizontalBar',
    data: {
      labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],
      datasets: [
        {
          backgroundColor: [
            orange,
            orange,
            orange,
            orange,
            orange,
            orange,
            orange,
          ],
          data: [
            80,
            20,
            20,
            30,
            30,
            70,
            30,
          ],
        },
      ],
    },
    options: {
      tooltips: {
          mode: 'index'
      },
      legend: {display: false},
      scales: {
        xAxes: [
          {
            gridLines: {
              display: false,
            },
            ticks: {display: false, beginAtZero: true}
          },
        ],
        yAxes: [
          {
            gridLines: {
              display: false,
            },
          },
        ],
      },
    },
  })



}
</script>
</div>

<style>
li {
  list-style: none
}

ul {
  padding-left: 0px;

}


</style>

<div id="page-graphs" style="display: none">
  <div class="container" style="max-width: 45em;">

  <br />
  <br />

  <hr>
  <div class="row" style="margin-top: 5px">
    <div class="col-md-3">
      <h5 class="text-muted">Median 7 days</h5>
      <div class="text-monospace py-2">
        <h4>40</h4>
      </div>
    </div>
    <div class="col-md-3">
      <h5 class="text-muted">Two days ago</h5>
      <div class="text-monospace py-2">
        <h4>40</h4>
      </div>
    </div>
    <div class="col-md-3">
      <h5 class="text-muted">Yesterday</h5>
      <div class="text-monospace py-2">
        <h4>30</h4>
      </div>
    </div>
    <div class="col-md-3">
      <h5 class="text-muted">Today</h5>
      <div class="text-monospace py-2">
        <h4>50</h4>
      </div>
    </div>
  </div>

  <div class="row" style="margin-bottom: 5px">
    <div class="col-md-12">
      <div class="border py-5 px-3">
        <canvas height="100" id="graph" />
      </div>
    </div>
  </div>

  <div class="row my-5">
    <div class="col-md-6">
      <h4 class="text-muted">Top Referrers</h4>
        <ul>
          <li>facebook.com <small class="text-muted">8k</small> <br/></li>
          <li>google.com <small class="text-muted">80</small> <br/></li>
          <li>yahoo.de <small class="text-muted">450</small> <br/></li>
        </ul>
    </div>
    <div class="col-md-6">
      <h4 class="text-muted">Top Pages</h4>
        <ul>
          <li>/ <small class="text-muted">8k</small> <br/></li>
          <li>/blog <small class="text-muted">80</small> <br/></li>
          <li>/search <small class="text-muted">450</small> <br/></li>
        </ul>
    </div>
  </div>

<hr>

  <div class="row my-5">
    <div class="col-md-3">
      <h5 class="text-muted">Weekday</h5>
      <div class="py-2">
        <canvas id="weekday"  height=200 />
      </div>
    </div>
    <div class="col-md-3">
      <h5 class="text-muted">Time</h5>
      <div class="py-2">
        <canvas id="time"  height=200 />
      </div>
    </div>
    <div class="col-md-3">
      <h5 class="text-muted">Has referrer</h5>
      <div class="py-2">
        <canvas id="direct" height=200 />
      </div>
    </div>
    <div class="col-md-3">
      <h5 class="text-muted">Mobile</h5>
      <div class="py-2">
        <canvas id="mobile" height=200 />
      </div>
    </div>
  </div>

  <hr>

  <div class="row my-5">
    <div class="col-md-6">
      <h4 class="text-muted">Top Browsers</h4>
        <ul>
          <li>facebook.com <small class="text-muted">8k</small> <br/></li>
          <li>google.com <small class="text-muted">80</small> <br/></li>
          <li>yahoo.de <small class="text-muted">450</small> <br/></li>
        </ul>
    </div>
    <div class="col-md-6">
      <h4 class="text-muted">Top Operating Systems</h4>
        <ul>
          <li>/ <small class="text-muted">8k</small> <br/></li>
          <li>/blog <small class="text-muted">80</small> <br/></li>
          <li>/search <small class="text-muted">450</small> <br/></li>
        </ul>
    </div>
  </div>

  <hr />


  <div class="row my-5">
    <div class="col-md-12">
      <h4 class="text-muted">Last Access</h4>
        <ul>
          <li>facebook.com <small class="text-muted">8k</small> <br/></li>
          <li>google.com <small class="text-muted">80</small> <br/></li>
          <li>yahoo.de <small class="text-muted">450</small> <br/></li>
        </ul>
    </div>
  </div>

  <hr />


  <div class="row my-5">
    <div class="col-md-12">
      <h4 class="text-muted">Language scores</h4>
        <ul>
          <li>facebook.com <small class="text-muted">8k</small> <br/></li>
          <li>google.com <small class="text-muted">80</small> <br/></li>
          <li>yahoo.de <small class="text-muted">450</small> <br/></li>
        </ul>
    </div>
  </div>


  <!--<button onclick="post('dashboard')">Update Data</button>-->
  <hr>
  </br>
  </br>
  </br>
  </br>
  </br>
  </br>
  </br>
  </br>
  </br>
 <h1>Integration</h1>

    <div class="col-md-12 alert-secondary">
      <pre><code>&lt;p&gt;Sample text here...&lt;/p&gt;
      &lt;p&gt;And another line of sample text here...&lt;/p&gt;
      </code></pre>
    </div>

  </div>
</div>

<script>
document.getElementById("user").value = "asdf"
document.getElementById("user").focus()
document.getElementById("password").value = "asdfasdf"
//document.forms[0].submit()

</script>


</body>


</html>
