<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="description" content="Measure how many people are using your webapp"> 
    <title>Webstats</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">


    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>

    <style>
.clean {
  color: #eb8034;
}
.btn-warning {
  font-weight: bold;
  background-color: #eb8034;
  border-color: black;
  color: white;
  text-shadow: -1px 0 #e86e17, 0 1px  #e86e17, 1px 0 #e86e17, 0 -1px #e86e17;
}

.btn-light, .btn-light:hover {
  border-color: black;
}


    </style>
</head>

<body>
<div id="page-index">
<div style="background-color: #eb8034; min-height: 100vh; padding-top: 5em;">

<img src="http://localhost:5000/track/1588964708.5805395" style="position: fixed; right: 0px; bottom: 0px"></img>
<br/>

<div class="container" style="max-width: 37em;">

    <div class="card border-dark">
    <div class="card-body">

    <div class="card-title"><h2><b class="clean">Simple</b> Web Analytics</h2></div>
    <h6 class="card-subtitle mb-2 text-muted">Instant Setup. No Cookies. Always Free.</h6>

    <div class="card-text">
    <p>
    The lowest possible barrier to get you started with web analytics.
    </p>

    <div id="alert" class="alert alert-warning" style="display: none;" role="alert">
    </div>

    <form method="POST" action="">
      <div class="form-group has-error">
        <input id="user" class="form-control" name="username" placeholder="Domain or username">
      </div>
      <div class="form-group">
        <input id="password" type="password" name="password" class="form-control" placeholder="Password">
      </div>

      <div class="btn-group mr-2" role="group" aria-label="First group">
        <button type="submit" onclick="post('dashboard'); return false" class="btn btn-light" name="action">Login</button>
        <a href="#text-begin" class="btn btn-light">Read more</a>
      </div>
      <button type="submit" onclick="post('register'); return false" class="btn btn-dark float-right" name="action" value="register">&nbsp;&nbsp;Register&nbsp;&nbsp;</button>
    </form>

    </div>
    </div>
</div>

</div>
</div>

<div class="container" style="margin-bottom: 5em;">

<style>
p.short {
    max-width: 40em;

}
</style>

<h1 id="text-begin">Just Simple</h1>
<p class="short">
Clean Web Analytics is uncompromisingly simple and tries very hard to stand out of your way.
</p>

<h1>Realtime</h1>
<p class="short">
Your traffic is available at the moment it happens. See what is happening now, not yesterday.
</p>

<h1>See What Really Matters</h1>
<p class="short">
We only show our users what they actually understand. Clean Web Analytics was
carefully crafted to give you an uncluttered view. Everything is in one
printable page. No hidden menus.  
</p>

<h1>No Cookies</h1>
<p class="short">
We don't use cookies. We don't track with JavaScript. We don't do
Fingerprinting. We don't assign user indentifiers to traffic at all. Privacy is
baked in at the core technical design choices of Clean Web Analytics.
</p>

</div>


<script>


function post(name){
 user = document.getElementById("user").value
 password = document.getElementById("password").value

  fetch("/" + name, {
    method: "POST",
    body: "user=" + encodeURIComponent(user) + '&password=' + encodeURIComponent(password),
    headers: {
    'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'
   },
 }).then(resp => {
      if (resp.status == 200){
        return resp.json()
      } else if (resp.status == 400){
        return resp.text()
      } else {
        return "Bad server status code: " + resp.status
      }
  }
).then(data => {
    if (typeof(data) === "object"){
      showGraphs(data)
    } else {
      document.getElementById("alert").style.display = "block"
      document.getElementById("alert").innerHTML = data
    }
  })
}



function showGraphs(data){
  console.log(data)
  document.getElementById("page-index").style.display = "none"
  document.getElementById("page-graphs").style.display = "block"


  new Chart(document.getElementById("graph"), {
    type: 'line',
    data: {
      labels: ["2020-1-1", "2020-1-2", "2020-1-1", "2020-1-3", "2020-1-4"],
      datasets: [
        {
          data: [40, 50, 46, 60, 50],
          label: 'DAX',
          backgroundColor: '#268bd2',
          pointBackgroundColor: "rgba(0,0,0,0)",
        },
      ],
    },
    options: {
      scales: {
          yAxes: [{
              ticks: {
                  beginAtZero: true
              }
          }]
      },
      legend: {display: false},
    },
  })

  new Chart(document.getElementById("mobile"), {
    type: 'pie',
    data: {
      labels: [
        'Mobile',
        'Not Mobile',
      ],
      datasets: [
        {
          backgroundColor: [
            "#d33682 ",
            'white',
          ],
          borderColor: "#d33682 ",
          data: [
            30,
            70,
          ],
        },
      ],
    },
    options: {
      legend: {display: false},
    },
  })



}
</script>
</div>

<style>
li::marker {
  font-weight: bold
}
</style>

<div id="page-graphs" style="display: none">
  <div class="container" style="max-width: 40em;">
  <div class="row my-5">
    <div class="col-md-12">
      <h4>Users per day</h4>
      <div class="border py-5 px-3">
        <canvas id="graph" />
      </div>
    </div>
  </div>

  <div class="row my-5">
    <div class="col-md-6">
      <h4>Top Referrers</h4>
      <div class="border py-2">
        <ol>
          <li>facebook.com</li>
          <li>google.com</li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
        </ol>
      </div>
    </div>
    <div class="col-md-6">
      <h4>Top Pages</h4>
      <div class="border py-2">
        <ol>
          <li>/</li>
          <li>/post/why-bla-blu</li>
          <li>/search</li>
          <li>/dingsbums</li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
        </ol>
      </div>
    </div>
  </div>


  <div class="row my-5" style="display: none">
    <div class="col-md-6">
      <h4>Mobile</h4>
      <div class="border py-5">
        <canvas id="mobile" />
      </div>
    </div>
  </div>

  <br />
  <br />
  <button>More Details</button>
  <button onclick="post('dashboard')">Update Data</button>
  <button>Print Page</button>

  </div>
</div>

<script>
document.getElementById("user").value = "asdf"
document.getElementById("user").focus()
document.getElementById("password").value = "asdfasdf"
//document.forms[0].submit()

</script>


</body>


</html>
